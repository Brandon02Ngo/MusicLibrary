<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="mainPage.css">
  <link rel="icon" href="img/eagle.svg" type="image/x-icon">
</head>

<body>
  <!-- buttons  -->
  <h2 class = buttons>
    <!-- Home Button -->
    <a href= "index.html">
      <button>Home</button>
    </a>
    <a href= "musicUpload.html">
      <button>Upload</button>
    </a>
    <a href= "profile.html">
      <button>Profile</button>
    </a>
    <a href= "login.html">
      <button>Login</button>
    </a>
    <a href= "administration_page/index.html">
      <button>Admin</button>
    </a>
    <a href= "settings_page/index.html">
      <button>Settings</button>
    </a>
    <a href= "artistDataReport.html">
      <button>Data Report</button>
    </a>
    
  </h2>
  <main>
    
    <!-- Code for the search bar, needs to be connected to a js -->
    <input id="searchbar" type="text" name ="search" placeholder="Search">

    
    <h1 class="uhFont"> Top Picks </h1>
    <!-- The hyperlink to the different albums -->
    <a href="playlist.html"> 
    <!-- Unorder list of music inside song boxes -->
    <ul id="songlist" class="song-list">
      <li class="song-item">
        <img src="img/eagle.svg" alt="eagle" width ="100" height="100">
        <div class="song-info">
          <h2>

              <span id = "song-name">Apple song</span>

          </h2>
          <p>
            <span id = "song-genre"> Genre: Rap </span>
            <br> 
              <img src="img/star.svg" alt="Rating:" width ="15" height="15"> 
              <span id = "song-ratings"> 3.9 </span>
            <br> 
              <img src="img/eye.svg" alt="Views:" width ="15" height="15">
              <span id = "song-views"> 1235 </span>
          </p>
        </div>
      </a>
          
      </li>
      <li class="song-item">
        <img src="img/music_disc.png" alt="eagle" width ="100" height="100">
        <div class="song-info">
          <h2>Banger song</h2>
          <p>Genre: Country</p>
          <p>Rating: 3.9</p>
          <p> Views: 2345 </p>
        </div>
      </li>
      
      <li class="song-item">
        <div class="song-box"></div>
        <div class="song-info">
          <h2>candy song</h2>
          <p>Genre: Jazz</p>
          <p>Rating: 4.4</p>
          <p> Views: 4322 </p>
        </div>
      </li>
    </ul>

  <hr> <!--horizontal line-->

  <h1 class="uhFont">New Releases</h1>
    <ul id="new-releases" class="song-list">
      <li class="song-item">
        <div class="NR-box"></div>
        <div class="song-info">
          <h2>
            <span>Dancing song</span>
          </h2>
        </div>

      </li>
    </ul>

  <hr> <!--horizontal line-->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <h1 class="uhFont"> Recommended Artist </h1>
  <script src="mainPage.js"></script>
  <script>
    // Define fetchUsernames function here
    async function fetchUsernames() {
      try {
        pool = await sql.connect(dbConfig);
        const result = await pool.request().query("SELECT Username FROM [User] Where Role_ID = 2");
        return result.recordset;
      } catch (error) {
        console.error('Error fetching usernames:', error);
        return [];
      }
    }
  
    // Use the fetchUsernames function
    document.addEventListener('DOMContentLoaded', async () => {
      // Fetch usernames from the database
      const users = await fetchUsernames();
  
      // Get the UL element to append usernames
      const userList = document.getElementById('Recommended');
  
      // Loop through the array and create list items for each username
      users.forEach(user => {
        // Access the 'Username' property
        const username = user.Username;
  
        // Create a new LI element
        const listItem = document.createElement('li');
        listItem.textContent = username;
  
        // Append the LI element to the UL
        userList.appendChild(listItem);
      });
    });
  </script>
  <ul id="Recommended" class="song-list">
    <li class="song-item">
      <div class="Rec-box"></div>
      <div id="artist" class="song-info">
        <h2></h2>
      </div>
    </li>
  </ul> 
  <hr>

  
  <h1 class="uhFont">My Playlist</h1>
    <ul id="playlist" class="song-list">
      <li class="song-item">
        <img src="img/music_disc.png" alt="disk" width ="100" height="100">
        <div class="song-info">
          <h2>
            <span>My Playlist</span>
          </h2>
        </div>

      </li>
    </ul>

  </body>
  </html>